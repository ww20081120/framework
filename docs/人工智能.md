### 简介

Framework AI模块是基于langchain4j和国内大模型API（如通义千问）构建的AI功能集成模块。它提供了对多种AI功能的支持，包括自然语言处理、图像处理、音频处理等，并特别提供了NL2SQL（自然语言转SQL）功能。

### 特性

1. 支持多种国内大模型API，如通义千问（DashScope）
2. 集成langchain4j，提供强大的AI应用开发能力
3. 提供NL2SQL功能，可将自然语言转换为SQL查询
4. 支持多种媒体类型的处理（文本、图像、音频）
5. 提供Agent执行框架，支持复杂的AI任务执行

### 快速上手

1. 在pom.xml中引入AI模块依赖：

```xml
<dependency>
    <groupId>com.hbasesoft.framework</groupId>
    <artifactId>framework-ai-jmanus</artifactId>
    <version>${framework.version}</version>
</dependency>
```

2. 在application.yml中配置AI相关参数：

```yaml
ai:
  dashscope:
    api-key: your-api-key
```

3. 使用AI功能示例：

```java
@RestController
public class AIController {
    
    @Autowired
    private QwenChatModel chatModel;
    
    @GetMapping("/chat")
    public String chat(@RequestParam String message) {
        return chatModel.generate(message);
    }
}
```

### NL2SQL功能

NL2SQL模块可以将自然语言转换为SQL查询语句，方便非技术人员进行数据查询。

使用示例：

```java
@RestController
public class NL2SQLController {
    
    @Autowired
    private SimpleChatController chatController;
    
    @PostMapping("/nl2sql")
    public String nl2sql(@RequestBody Map<String, String> request) {
        return chatController.chat(request.get("query"));
    }
}
```

### Agent执行框架

AI模块提供了强大的Agent执行框架，可用于执行复杂的AI任务。该框架基于注解驱动，开发者可以通过简单的类定义和方法注解快速创建功能强大的AI Agent。

#### 特性

1. 注解驱动：通过 `@Agent` 和 `@Action` 注解快速定义Agent和其功能
2. 模块化设计：支持文件操作、数据库操作、工具调用等多种功能模块
3. 易于扩展：可以轻松添加自定义工具和功能

#### 快速上手

1. 在pom.xml中引入AI Agent模块依赖：

```xml
<dependency>
    <groupId>com.hbasesoft.framework</groupId>
    <artifactId>framework-ai-agent-file</artifactId>
    <version>${framework.version}</version>
</dependency>
```

2. 定义一个简单的Agent类：

```java
@Agent(name = "simpleAgent", description = "一个简单的示例代理", model = "Qwen/Qwen3-Coder-480B-A35B-Instruct", actions = {
    "bash", "text_file_operator", "planning", "python_execute", "google_search"
})
public class SimpleAgent implements AgentConfigProvider {

    @Override
    public String getSystemPrompt() {
        return "你是一个简单的示例代理，用于演示如何提供系统提示词。";
    }

    @Override
    public String getNextStepPrompt() {
        return "请继续执行下一步操作。";
    }
}
```

3. 定义带有Action的Agent类：

```java
@Agent(name = "DemoAgent", actions = {
    "bash", "planning", "python_execute"
}, description = "我能看当前是什么时间，也能算两个数相加， 还能和人打招呼", systemPrompt = """
     getCurrentDateTime 方法用来获取当前时间的，
     add 是用来相加的方法，
     greet是打招呼的s
    """)
public class AgentDemo {

    @Action(description = "Get the current date and time in the user's timezone")
    public String getCurrentDateTime() {
        System.out.println("获取系统时间");
        return LocalDateTime.now().atZone(LocaleContextHolder.getTimeZone().toZoneId()).toString();
    }

    @Action(description = "Add two numbers together")
    public int add(@ActionParam(description = "The first number to add", required = true) int a,
        @ActionParam(description = "The second number to add", required = true) int b) {
        System.out.println("两数相加:" + a + ":" + b);
        return a + b;
    }

    @Action(description = "Greet a person by name", serviceGroup = "greeting-tools")
    public String greet(@ActionParam(description = "The name of the person to greet", required = true) String name,
        @ActionParam(description = "The greeting language (e.g., 'en', 'zh')", required = false) String language) {
        String lang = (language != null) ? language : Locale.getDefault().getLanguage();
        System.out.println("打招呼:" + name);
        if ("zh".equals(lang)) {
            return "你好，" + name + "！";
        }
        else {
            return "Hello, " + name + "!";
        }
    }
}
```

通过以上示例可以看出，使用framework-ai-agent模块创建AI Agent非常简单，只需要定义一个类并使用相应的注解即可。

### 配置参数说明

| 参数 | 说明 | 默认值 |
|------|------|--------|
| ai.dashscope.api-key | 通义千问API密钥 | 无 |
